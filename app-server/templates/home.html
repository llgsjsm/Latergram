<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Latergrams</title>

  <!-- Local CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap/css/bootstrap.min.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap/css/node_modules/bootstrap-icons/font/bootstrap-icons.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='fontawesome/css/all.min.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='fonts/beau-rivage/style.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/main.css') }}" />
  
</head>

<body>
  <div class="d-flex">
    <nav id="main-nav" class="flex-column bg-light py-5 px-3">
      <a class="navbar-brand mb-4" href="">
        Later<span class="beau">G</span>ram
      </a>
      <ul class="nav nav-pills flex-column">
        <li class="nav-item">
          <a class="nav-link active" href="#"><i class="fas fa-house"></i>Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#"><i class="fas fa-magnifying-glass"></i>Search</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('create_post') }}"><i class="fas fa-plus"></i>Create Post</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#"><i class="fas fa-user"></i>Profile</a>
        </li>
        <li class="nav-item">
          <a id="logout-btn" class="nav-link" href="#"><i class="fas fa-arrow-right-from-bracket"></i>Logout</a>
        </li>
      </ul>
    </nav>

    <div class="flex-grow-1 py-5 px-3">
      <h1>Welcome</h1>
      <!-- <p>This is the main content area</p> -->

      <!-- <div class="posts">
          {% for post in posts %}
          <div class="card mb-3">
            <div class="card-body">
              <h5 class="card-title">{{ post.title }}</h5>
              <h6 class="card-subtitle mb-2 text-muted">
                by {{ post.author.username }}
              </h6>
              <p class="card-text">{{ post.content }}</p>
              <p class="card-text">
                <small class="text-muted"
                  >Posted on {{ post.timeOfPost.strftime('%Y-%m-%d %H:%M') }}</small
                >
              </p>
            </div>
          </div>
          {% endfor %}
        </div> -->

      <div class="container d-flex justify-content-center">
        <div class="feed w-100" style="max-width: 600px;">
          {% for post in posts %}
          <div class="post card mb-4 border-0 shadow-sm rounded">

            <!-- Post Image -->
            <img src="{{ post.image }}" class="card-img-top" alt="Post image" />

            <!-- Post Caption -->
            <div class="card-body">
              <p class="card-text mb-1">
                <strong>{{ post.author.username }}</strong> {{ post.content }}
              </p>

              <!-- Like and Comment Info -->
              <div class="d-flex align-items-center mb-2">

                <!-- Like Button -->
                <form method="POST" action="{{ url_for('like_post', post_id=post.postId) }}" class="me-3">
                  <button type="submit" class="btn btn-sm btn-outline-danger">
                    <i class="bi bi-heart"></i>
                  </button>
                  <span>{{ post.like }} likes</span>
                </form>

                <!-- Comment Count -->
                <i class="far fa-comment me-1"></i>
                <span>{{ post.comments|length }} comments</span>
              </div>

              <!-- Posted Time -->
              <p class="card-text">
                <small class="text-muted">
                  Posted on {{ post.timeOfPost.strftime('%B %d, %Y at %H:%M') }}
                </small>
              </p>

              <!-- Display Comments -->
              <div class="mt-3">
                {% for comment in post.comments %}
                {% if comment.parentCommentId == None %}
                <p class="mb-1">
                  <strong>{{ comment.author.username }}</strong> {{ comment.commentContent }}
                </p>
                {% endif %}
                {% endfor %}
              </div>

              <!-- Add Comment Form -->
              <form method="POST" action="{{ url_for('add_comment', post_id=post.postId) }}">
                <div class="input-group mt-2">
                  <input type="text" name="comment" class="form-control" placeholder="Add a comment..." required />
                  <button type="submit" class="btn btn-outline-primary">Post</button>
                </div>
              </form>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>




    </div>
  </div>

  <!-- Local JS -->
  <script src="{{ url_for('static', filename='bootstrap/js/bootstrap.bundle.min.js') }}"></script>
</body>

</html>